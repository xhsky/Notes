# æ’ä»¶
set -g @plugin 'tmux-plugins/tpm'
#set -g @plugin 'tmux-plugins/tmux-sensible'
set -g @plugin 'tmux-plugins/tmux-resurrect'      # ä¿å­˜tmuxä¼šè¯
set -g @resurrect-strategy-vim 'session'          # æ¢å¤vim
set -g @resurrect-capture-pane-contents 'on'      # ä¿å­˜å’Œæ¢å¤paneå†…å®¹
#set -g @plugin 'tmux-plugins/tmux-fpp'           # å¿«é€Ÿæ‰“å¼€ç»ˆç«¯çª—å£ä¸Šçš„ä»»ä½•è·¯å¾„
set -g @plugin 'MunifTanjim/tmux-mode-indicator'  # æ˜¾ç¤ºæç¤ºçš„æ’ä»¶, æŒ‡ç¤ºå½“å‰æ´»åŠ¨çš„Tmuxæ¨¡å¼
set -g @plugin 'tmux-plugins/tmux-sidebar'        # å®ƒä¸ºå½“å‰è·¯å¾„æ‰“å¼€ä¸€ä¸ªæ ‘ç›®å½•åˆ—è¡¨
set -g @plugin 'tmux-plugins/tmux-yank'           # å°†å†…å®¹å¤åˆ¶åˆ°ç³»ç»Ÿå‰ªè´´æ¿
#set -g @plugin 'aaronpowell/tmux-weather'

#è®¾ç½®å‰ç¼€ä¸ºAlt + j
unbind C-b
set -g prefix M-j
bind M-j send-prefix                              # æŒ‰ä¸¤æ¬¡M-j å³å¯å°†æ­¤ç»„åˆé”®å‘é€è‡³çª—å£é‡Œçš„ç¨‹åº
set -g mouse on                                   # é¼ æ ‡æ”¯æŒ

#å°†rè®¾ç½®ä¸ºåŠ è½½é…ç½®æ–‡ä»¶, å¹¶æ˜¾ç¤º"reloaded!"ä¿¡æ¯
bind r source-file ~/.tmux.conf \; display-message -d 100 "   Tmux Config Reloaded !"
#set -g default-terminal "screen-256color"             # å¼€å¯256 colorsæ”¯æŒ

# vimä¸­åŠŸèƒ½æŒ‰é”®(esc, Fn)å»¶è¿Ÿ50æ¯«ç§’, 
set -g escape-time 10                     # å»¶æ—¶(æ¾å¼€prefixé”®å’ŒæŒ‰ä¸‹å‘½ä»¤é”®ä¹‹é—´çš„å»¶æ—¶æ—¶é—´)
set -sg repeat-time 600                   # increase repeat timeout

# windowç›‘æ§
set -g monitor-activity off               # éå½“å‰çª—å£æœ‰å†…å®¹æ›´æ–°æ—¶åœ¨çŠ¶æ€æ çªå‡ºæ˜¾ç¤º
set -g activity-action any                # ä»»ä½•windowæ´»åŠ¨ä¼šåœ¨å½“å‰window
#set -g visual-activity both              # å‘é€æ¶ˆæ¯å’Œå“é“ƒ

# window
## window index
set -g base-index 1                                       # çª—å£çš„åˆå§‹åºå·ï¼›é»˜è®¤ä¸º0, è¿™é‡Œè®¾ç½®ä¸º1
set -g renumber-windows off                               # å…³é—­é‡æ–°ç¼–å·
set -g display-time 1000                                  # æç¤ºä¿¡æ¯çš„æŒç»­æ—¶é—´ï¼›è®¾ç½®è¶³å¤Ÿçš„æ—¶é—´ä»¥é¿å…çœ‹ä¸æ¸…æç¤º, å•ä½ä¸ºæ¯«ç§’

set -g history-limit 20000                                # windowçš„å†å²è®°å½•è¡Œæ•°

# pane
set -g pane-base-index 1                              # è®¾ç½®é¢æ¿çš„èµ·å§‹ä¸‹æ ‡ä¸º1, ä¸paneç´¢å¼•ä¸€è‡´
set -gw pane-active-border-style fg="yellow"          # è®¾ç½®æ­£åœ¨ä½¿ç”¨çš„çª—å£çš„è¾¹ç•Œé¢œè‰², åœ¨ä¸åŒçª—å£åˆ‡æ¢æ—¶è¾¹ç•Œé¢œè‰²ä¼šå˜åŒ–
set -gw pane-border-style fg="cyan"                   # è®¾ç½®éæ´»åŠ¨çª—å£çš„è¾¹ç•Œé¢œè‰²
set -gw pane-border-lines single                      # è¾¹æ¡†æ ·å¼
set -gw pane-border-status off                        # è¾¹æ¡†çŠ¶æ€çº¿
set -gw display-panes-time 10000                      # æ˜¾ç¤ºpaneç´¢å¼•çš„æ—¶é—´
bind a set -w synchronize-panes                       # å°†åŒæ­¥çª—æ ¼çš„æŒ‰é”®ç»‘å®šåˆ°a
bind O display-popup -E                               # å¼¹å‡ºçª—å£
bind -N "å°†markçš„paneè½¬ä¸ºå½“å‰windowçš„pane" @ join-pane 
bind -N "å°†markçš„paneå’Œå½“å‰çš„paneäº¤æ¢" \\ swap-pane

# é¢æ¿åˆ‡æ¢
bind-key k select-pane -U              # up
bind-key j select-pane -D              # down
bind-key h select-pane -L              # left
bind-key l select-pane -R              # right

# è°ƒæ•´é¢æ¿å¤§å°
bind -r K resize-pane -U 5
bind -r J resize-pane -D 5
bind -r H resize-pane -L 5
bind -r L resize-pane -R 5

# é‡æ–°æ˜ å°„é¢æ¿åˆ†å‰²
unbind '"'
#bind - splitw -v -c '#{pane_current_path}' 'watch echo a #{command} a'     # åˆ†å‰²æˆä¸Šä¸‹ä¸¤ä¸ªpane, é»˜è®¤è¿›å…¥å½“å‰ç›®å½•
bind - splitw -v -c '#{pane_current_path}'                                  # åˆ†å‰²æˆä¸Šä¸‹ä¸¤ä¸ªpane, é»˜è®¤è¿›å…¥å½“å‰ç›®å½•
bind M-- splitw -fv -c '#{pane_current_path}'                               # åˆ›å»ºæ•´ä¸ªä¸‹pane, é»˜è®¤è¿›å…¥å½“å‰ç›®å½•
unbind %
bind | splitw -h -c '#{pane_current_path}'                                  # åˆ†å‰²æˆå·¦å³ä¸¤ä¸ªpane
bind M-| splitw -fh -c '#{pane_current_path}'                               # åˆ›å»ºæ•´ä¸ªå³pane

# å¤åˆ¶
## bufferç¼“å­˜
setw -g mode-keys vi                                                        # å¤åˆ¶æ¨¡å¼ä¸­çš„é»˜è®¤é”®ç›˜å¸ƒå±€ï¼›å¯ä»¥è®¾ç½®ä¸ºviæˆ–emacs
bind -r Escape copy-mode                                                    # ç»‘å®šescé”®ä¸ºè¿›å…¥å¤åˆ¶æ¨¡å¼
bind -T copy-mode-vi v send-keys -X begin-selection                         # ç»‘å®švé”®ä¸ºå¼€å§‹é€‰æ‹©æ–‡æœ¬
bind -T copy-mode-vi y send-keys -X copy-selection-and-cancel               # ç»‘å®šyé”®ä¸ºå¤åˆ¶é€‰ä¸­æ–‡æœ¬

# ç³»ç»Ÿé»è´´æ¿
# normal æ¨¡å¼:
#   prefix + y: å°†å‘½ä»¤è¡Œä¸Šçš„æ–‡æœ¬å¤åˆ¶åˆ°ç³»ç»Ÿå‰ªè´´æ¿ï¼›
#   prefix + Y: å°†å½“å‰çª—æ ¼çš„å½“å‰è·¯å¾„å¤åˆ¶åˆ°ç³»ç»Ÿå‰ªè´´æ¿ï¼›
# copy æ¨¡å¼:
#   y: å°†é€‰å–çš„å†…å®¹å¤åˆ¶åˆ°ç³»ç»Ÿå‰ªè´´æ¿ï¼›
#   Y: å°†é€‰å–çš„å†…å®¹å¤åˆ¶å¹¶ç²˜è´´åˆ°å‘½ä»¤è¡Œï¼›

# ssh key binding
bind * display-menu -T "ssh tools" -x P -y P \
ssh | "splitw -h #(ps -t #{pane_tty} -o command -h | grep -w '^ssh')" \
ssh - "splitw -v #(ps -t #{pane_tty} -o command -h | grep -w '^ssh')" \
"" \
sshf | "splitw -fh #(ps -t #{pane_tty} -o command -h | grep -w '^ssh')" \
sshf - "splitw -fv #(ps -t #{pane_tty} -o command -h | grep -w '^ssh')" \

# çŠ¶æ€æ   
set -g status on
set -g status-position bottom
set -g status-interval 1                      # çŠ¶æ€æ åˆ·æ–°æ—¶é—´
set -g status-style "fg=white"                # èƒŒæ™¯è‰², å‰æ™¯è‰²
set -g status-justify absolute-centre         # çŠ¶æ€æ åˆ—è¡¨å·¦å¯¹é½
set -g status-keys vi                         # æ“ä½œçŠ¶æ€æ æ—¶çš„é»˜è®¤é”®ç›˜å¸ƒå±€ï¼›å¯ä»¥è®¾ç½®ä¸ºviæˆ–emacs

# status-left
set -g status-left-length 300 											                          # çŠ¶æ€æ å·¦è¾¹é•¿åº¦300
set -g status-left "ğŸ #{tmux_mode_indicator} #S: #I #W(#P)" 			            # çŠ¶æ€æ å·¦ä¾§å†…å®¹

# status-right
set -g status-right "#(date +%m-%d' '%H:%M:%S'  ')"           # çŠ¶æ€æ å³æ–¹çš„å†…å®¹ï¼›è¿™é‡Œçš„è®¾ç½®å°†å¾—åˆ°ç±»ä¼¼23:59çš„æ˜¾ç¤º
set -g status-right-length 20                                 # çŠ¶æ€æ å³æ–¹çš„å†…å®¹é•¿åº¦ï¼›å»ºè®®æŠŠæ›´å¤šçš„ç©ºé—´ç•™ç»™çŠ¶æ€æ å·¦æ–¹ï¼ˆç”¨äºåˆ—å‡ºå½“å‰çª—å£ï¼‰

# status-mid
set -wg window-status-format " #I #W "                # çŠ¶æ€æ windowåˆ—è¡¨åç§°æ ¼å¼
set -wg window-status-separator ""                    # çŠ¶æ€æ windowåˆ—è¡¨åç§°ä¹‹é—´çš„é—´éš”
set -wg window-status-current-format " #I:#W#F"       # çŠ¶æ€æ å½“å‰çª—å£åç§°æ ¼å¼(#Iï¼šåºå·ï¼Œ#wï¼šçª—å£åç§°ï¼Œ#Fï¼šé—´éš”ç¬¦)
set -wg window-status-current-style "fg=yellow"       # çŠ¶æ€æ å½“å‰çª—å£åç§°çš„æ ·å¼
set -wg window-status-last-style "fg=red"             # çŠ¶æ€æ æœ€åä¸€ä¸ªçª—å£åç§°çš„æ ·å¼

# message
set -g message-style "fg=white"         # æŒ‡å®šæ¶ˆæ¯é€šçŸ¥çš„å‰æ™¯ã€åæ™¯è‰²
set -g message-command-style "fg=blue"

# å…³é—­è‡ªåŠ¨é‡å‘½å
set -gw automatic-rename off
set -gw allow-rename off
set -g set-titles off       # å…³é—­é»˜è®¤çª—å£æ ‡é¢˜

run '~/.tmux/plugins/tpm/tpm'
